<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2.1.2. infrarisk.src.physical.transportation package &mdash; InfraRisk Simulation Platform 1.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="2.1.3. infrarisk.src.physical.water package" href="infrarisk.src.physical.water.html" />
    <link rel="prev" title="2.1.1. infrarisk.src.physical.power package" href="infrarisk.src.physical.power.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> InfraRisk Simulation Platform
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="model.html">Methodology and Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_req.html">Data requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="use.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Support</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="infrarisk.html">API Documentation</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="infrarisk.src.html">infrarisk.src package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="infrarisk.src.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="infrarisk.src.hazards.html">1. infrarisk.src.hazards package</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="infrarisk.src.physical.html">2. infrarisk.src.physical package</a></li>
<li class="toctree-l4"><a class="reference internal" href="infrarisk.src.socioeconomic.html">3. infrarisk.src.socioeconomic package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="infrarisk.src.html#module-infrarisk.src.network_recovery">infrarisk.src.network_recovery module</a></li>
<li class="toctree-l3"><a class="reference internal" href="infrarisk.src.html#module-infrarisk.src.optimizer">infrarisk.src.optimizer module</a></li>
<li class="toctree-l3"><a class="reference internal" href="infrarisk.src.html#module-infrarisk.src.plots">infrarisk.src.plots module</a></li>
<li class="toctree-l3"><a class="reference internal" href="infrarisk.src.html#module-infrarisk.src.recovery_strategies">infrarisk.src.recovery_strategies module</a></li>
<li class="toctree-l3"><a class="reference internal" href="infrarisk.src.html#module-infrarisk.src.repair_crews">infrarisk.src.repair_crews module</a></li>
<li class="toctree-l3"><a class="reference internal" href="infrarisk.src.html#module-infrarisk.src.resilience_metrics">infrarisk.src.resilience_metrics module</a></li>
<li class="toctree-l3"><a class="reference internal" href="infrarisk.src.html#module-infrarisk.src.simulation">infrarisk.src.simulation module</a></li>
<li class="toctree-l3"><a class="reference internal" href="infrarisk.src.html#module-infrarisk.src">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">InfraRisk Simulation Platform</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="infrarisk.html">API Documentation</a></li>
          <li class="breadcrumb-item"><a href="infrarisk.src.html">infrarisk.src package</a></li>
          <li class="breadcrumb-item"><a href="infrarisk.src.physical.html"><span class="section-number">2. </span>infrarisk.src.physical package</a></li>
      <li class="breadcrumb-item active"><span class="section-number">2.1.2. </span>infrarisk.src.physical.transportation package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/infrarisk.src.physical.transportation.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="infrarisk-src-physical-transportation-package">
<h1><span class="section-number">2.1.2. </span>infrarisk.src.physical.transportation package<a class="headerlink" href="#infrarisk-src-physical-transportation-package" title="Permalink to this headline"></a></h1>
<section id="module-infrarisk.src.physical.transportation.network">
<span id="infrarisk-src-physical-transportation-network-module"></span><h2><span class="section-number">2.1.2.1. </span>infrarisk.src.physical.transportation.network module<a class="headerlink" href="#module-infrarisk.src.physical.transportation.network" title="Permalink to this headline"></a></h2>
<dl class="py exception">
<dt class="sig sig-object py" id="infrarisk.src.physical.transportation.network.BadNetworkOperationException">
<em class="property"><span class="pre">exception</span> </em><span class="sig-prename descclassname"><span class="pre">infrarisk.src.physical.transportation.network.</span></span><span class="sig-name descname"><span class="pre">BadNetworkOperationException</span></span><a class="headerlink" href="#infrarisk.src.physical.transportation.network.BadNetworkOperationException" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>You can raise this exception if you try a network action which is invalid
(e.g., trying to find a topological order on a network with cycles.)</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="infrarisk.src.physical.transportation.network.Network">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">infrarisk.src.physical.transportation.network.</span></span><span class="sig-name descname"><span class="pre">Network</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">networkFile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">demandFile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodeFile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#infrarisk.src.physical.transportation.network.Network" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This is the class used for transportation networks.  It uses the following
dictionaries to store the network; the keys are IDs for the network elements,
and the values are objects of the relevant type:</p>
<blockquote>
<div><p>node – network nodes; see node.py for description of this class
link – network links; see link.py for description of this class
ODpair – origin-destination pairs; see od.py
path – network paths; see path.py.  Paths are NOT automatically generated</p>
<blockquote>
<div><p>when the network is initialized (you probably wouldn’t want this,
the number of paths is exponential in network size.)</p>
</div></blockquote>
<p>The network topology is expressed both in links (through the tail and head
nodes) and in nodes (forwardStar and reverseStar are Node attributes storing
the IDs of entering and leaving links in a list).</p>
<p>numNodes, numLinks, numZones – self-explanatory
firstThroughNode – in the TNTP data format, transiting through nodes with</p>
<blockquote>
<div><p>low IDs can be prohibited (typically for centroids; you
may not want vehicles to use these as “shortcuts”).
When implementing shortest path or other routefinding,
you should prevent trips from using nodes with lower
IDs than firstThroughNode, unless it is the destination.</p>
</div></blockquote>
</div></blockquote>
<dl class="py method">
<dt class="sig sig-object py" id="infrarisk.src.physical.transportation.network.Network.FrankWolfeStepSize">
<span class="sig-name descname"><span class="pre">FrankWolfeStepSize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">targetFlows</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">precision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0001</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#infrarisk.src.physical.transportation.network.Network.FrankWolfeStepSize" title="Permalink to this definition"></a></dt>
<dd><p>This method returns the step size lambda used by the Frank-Wolfe algorithm.</p>
<p>The current link flows are given in the self.link[ij].flow attributes, and the
target flows are given in the targetFlows dictionary.</p>
<p>The precision argument dictates how close your method needs to come to finding
the exact Frank-Wolfe step size: you are fine if the absolute difference
between the true value, and the value returned by your method, is less than
precision.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="infrarisk.src.physical.transportation.network.Network.acyclicShortestPath">
<span class="sig-name descname"><span class="pre">acyclicShortestPath</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">origin</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#infrarisk.src.physical.transportation.network.Network.acyclicShortestPath" title="Permalink to this definition"></a></dt>
<dd><p>This method finds the shortest path in an acyclic network, from the stated
origin.  You can assume that a topological order has already been found,
and referred to in the ‘order’ attributes of network Nodes.  You can also
find a list of nodes in topological order in self.topologicalList.  (See the
method createTopologicalList below.)</p>
<p>Use the ‘cost’ attribute of the Links to calculate travel times.  These values
are given – do not try to recalculate them based on flows, BPR functions, etc.</p>
<p>Be aware that both the order Node attribute and topologicalList respect the usual
convention in network modeling that the topological order starts at 1, whereas
Python starts numbering at 0.</p>
<p>The implementation in the text uses a vector of backnode labels.  In this
assignment, you should use back-LINK labels instead.  The idea is exactly
the same, except you are storing the ID of the last <em>link</em> in a shortest
path to each node.</p>
<p>The backlink and cost labels are both stored in dict’s, whose keys are
node IDs.</p>
<p><strong>* BE SURE YOUR IMPLEMENTATION RESPECTS THE FIRST THROUGH NODE!
*</strong> Travelers should not be able to use “centroid connectors” as shortcuts,
<a href="#id1"><span class="problematic" id="id2">**</span></a>* and the shortest path tree should reflect this.</p>
<p>You should use the macro utils.NO_PATH_EXISTS to initialize backlink labels,
and utils.INFINITY to initialize cost labels.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="infrarisk.src.physical.transportation.network.Network.allOrNothing">
<span class="sig-name descname"><span class="pre">allOrNothing</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#infrarisk.src.physical.transportation.network.Network.allOrNothing" title="Permalink to this definition"></a></dt>
<dd><p>This method generates an all-or-nothing assignment using the current link
cost values.  It must do the following:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Find shortest paths from all origins to all destinations</p></li>
<li><p>For each OD pairs in the network, load its demand onto the shortest
path found above.  (Ties can be broken arbitrarily.)</p></li>
</ol>
</div></blockquote>
<p>The resulting link flows should be returned in the allOrNothing dict, whose
keys are the link IDs.</p>
<p>Be aware that the network files are in the TNTP format, where nodes are numbered
starting at 1, whereas Python starts numbering at 0.</p>
<p>Your code will not be scored based on efficiency, but you should think about
different ways of finding an all-or-nothing loading, and how this might
best be done.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="infrarisk.src.physical.transportation.network.Network.averageExcessCost">
<span class="sig-name descname"><span class="pre">averageExcessCost</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#infrarisk.src.physical.transportation.network.Network.averageExcessCost" title="Permalink to this definition"></a></dt>
<dd><p>This method should calculate the average excess cost
based on the current link flows, and return this value.</p>
<p>To do this, you will need to calculate both the total system travel time, and
the shortest path travel time (you will find it useful to call some of the
methods implemented in earlier assignments).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="infrarisk.src.physical.transportation.network.Network.beckmannFunction">
<span class="sig-name descname"><span class="pre">beckmannFunction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#infrarisk.src.physical.transportation.network.Network.beckmannFunction" title="Permalink to this definition"></a></dt>
<dd><p>This method evaluates the Beckmann function at the current link
flows.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="infrarisk.src.physical.transportation.network.Network.calculateShortestTravelTime">
<span class="sig-name descname"><span class="pre">calculateShortestTravelTime</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">origin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#infrarisk.src.physical.transportation.network.Network.calculateShortestTravelTime" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="infrarisk.src.physical.transportation.network.Network.createTopologicalList">
<span class="sig-name descname"><span class="pre">createTopologicalList</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#infrarisk.src.physical.transportation.network.Network.createTopologicalList" title="Permalink to this definition"></a></dt>
<dd><p>Takes a topological ordering of the nodes, expressed by the ‘order’
attribute of the Node objects, and creates a single list which stores
the IDs of the nodes in topological order.  This is essentially the
inverse function of the topological order, the k-th element of this list
gives you the ID of the node whose order value is k.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="infrarisk.src.physical.transportation.network.Network.finalize">
<span class="sig-name descname"><span class="pre">finalize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#infrarisk.src.physical.transportation.network.Network.finalize" title="Permalink to this definition"></a></dt>
<dd><p>Establish the forward and reverse star lists for nodes, initialize flows and
costs for links and OD pairs.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="infrarisk.src.physical.transportation.network.Network.findLeastEnteringLinks">
<span class="sig-name descname"><span class="pre">findLeastEnteringLinks</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#infrarisk.src.physical.transportation.network.Network.findLeastEnteringLinks" title="Permalink to this definition"></a></dt>
<dd><p>This method should return the ID of the node with the <em>least</em> number
of links entering the node.  Ties can be broken arbitrarily.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="infrarisk.src.physical.transportation.network.Network.findTopologicalOrder">
<span class="sig-name descname"><span class="pre">findTopologicalOrder</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#infrarisk.src.physical.transportation.network.Network.findTopologicalOrder" title="Permalink to this definition"></a></dt>
<dd><p>This method should find a topological order for the network, storing
the order in the ‘order’ attribute of the nodes, i.e.:</p>
<blockquote>
<div><p>self.node[5].order</p>
</div></blockquote>
<p>should store the topological label for node 5.</p>
<p>The topological order is generally not unique, this method can return any
valid order.  The nodes should be labeled 1, 2, 3, … up through numNodes.</p>
<p>If the network has cycles, a topological order does not exist.  The presence
of cycles can be detected in the algorithm for finding a topological order,
and you should raise an exception if this is detected.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="infrarisk.src.physical.transportation.network.Network.formAdjacencyMatrix">
<span class="sig-name descname"><span class="pre">formAdjacencyMatrix</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#infrarisk.src.physical.transportation.network.Network.formAdjacencyMatrix" title="Permalink to this definition"></a></dt>
<dd><p>This method should produce an adjacency matrix, with rows and columns
corresponding to each node, and entries of 1 if there is a link connecting
the row node to the column node, and 0 otherwise.  This matrix should
be stored in self.adjacencyMatrix, which is a dictionary of dictionaries:
the first key is the “row” (tail) node, and the second key is the “column”
(head) node.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="infrarisk.src.physical.transportation.network.Network.loadPaths">
<span class="sig-name descname"><span class="pre">loadPaths</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#infrarisk.src.physical.transportation.network.Network.loadPaths" title="Permalink to this definition"></a></dt>
<dd><p>This method should take given values of path flows (stored in the
self.path[].flow attributes), and do the following:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Set link flows to correspond to these values (self.link[].flow)</p></li>
<li><p>Set link costs based on new flows (self.link[].cost), see link.py</p></li>
<li><p>Set path costs based on new link costs (self.path[].cost), see path.py</p></li>
</ol>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="infrarisk.src.physical.transportation.network.Network.readDemandFile">
<span class="sig-name descname"><span class="pre">readDemandFile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">demandFileName</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#infrarisk.src.physical.transportation.network.Network.readDemandFile" title="Permalink to this definition"></a></dt>
<dd><p>Reads demand (OD matrix) data from a file in the TNTP format.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="infrarisk.src.physical.transportation.network.Network.readFromFiles">
<span class="sig-name descname"><span class="pre">readFromFiles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">networkFile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">demandFile</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#infrarisk.src.physical.transportation.network.Network.readFromFiles" title="Permalink to this definition"></a></dt>
<dd><p>Reads network data from a pair of files (networkFile, containing the topology,
and demandFile, containing the OD matrix), then do some basic checks on
the input data (validate) and build necessary data structures (finalize).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="infrarisk.src.physical.transportation.network.Network.readNetworkFile">
<span class="sig-name descname"><span class="pre">readNetworkFile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">networkFileName</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#infrarisk.src.physical.transportation.network.Network.readNetworkFile" title="Permalink to this definition"></a></dt>
<dd><p>Reads network topology data from the TNTP data format.  In keeping with
this format, the zones/centroids are assumed to have the lowest node
IDs (1, 2, …, numZones).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="infrarisk.src.physical.transportation.network.Network.relativeGap">
<span class="sig-name descname"><span class="pre">relativeGap</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#infrarisk.src.physical.transportation.network.Network.relativeGap" title="Permalink to this definition"></a></dt>
<dd><p>This method should calculate the relative gap (as defined in the course text)
based on the current link flows, and return this value.</p>
<p>To do this, you will need to calculate both the total system travel time, and
the shortest path travel time (you will find it useful to call some of the
methods implemented in earlier assignments).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="infrarisk.src.physical.transportation.network.Network.shiftFlows">
<span class="sig-name descname"><span class="pre">shiftFlows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">targetFlows</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stepSize</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#infrarisk.src.physical.transportation.network.Network.shiftFlows" title="Permalink to this definition"></a></dt>
<dd><p>This method should update the flow on each link, by taking a weighted
average of the current link flows (self.link[ij].flow) and the flows
given in the targetFlows dictionary (targetFlows[ij]).  stepSize indicates
the weight to place on the target flows (so the weight on the current
flows is 1 - stepSize).</p>
<p><strong>* IMPORTANT: After updating the flow on a link, you should call its
updateCost method, so that the travel time is updated to reflect
the new flow value. *</strong></p>
<p>This method does not need to return a value.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="infrarisk.src.physical.transportation.network.Network.shortestPath">
<span class="sig-name descname"><span class="pre">shortestPath</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">origin</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#infrarisk.src.physical.transportation.network.Network.shortestPath" title="Permalink to this definition"></a></dt>
<dd><p>This method finds the shortest path in a network which may or may not have
cycles; thus you cannot assume that a topological order exists.</p>
<p>The implementation in the text uses a vector of backnode labels.  In this
assignment, you should use back-LINK labels instead.  The idea is exactly
the same, except you are storing the ID of the last <em>link</em> in a shortest
path to each node.</p>
<p>Use the ‘cost’ attribute of the Links to calculate travel times.  These values
are given – do not try to recalculate them based on flows, BPR functions, etc.</p>
<p>The backlink and cost labels are both stored in dict’s, whose keys are
node IDs.</p>
<p><strong>* BE SURE YOUR IMPLEMENTATION RESPECTS THE FIRST THROUGH NODE!
*</strong> Travelers should not be able to use “centroid connectors” as shortcuts,
<a href="#id3"><span class="problematic" id="id4">**</span></a>* and the shortest path tree should reflect this.</p>
<p>You should use the macro utils.NO_PATH_EXISTS to initialize backlink labels,
and utils.INFINITY to initialize cost labels.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="infrarisk.src.physical.transportation.network.Network.userEquilibrium">
<span class="sig-name descname"><span class="pre">userEquilibrium</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">stepSizeRule='MSA'</span></em>, <em class="sig-param"><span class="pre">maxIterations=100</span></em>, <em class="sig-param"><span class="pre">targetGap=1e-06</span></em>, <em class="sig-param"><span class="pre">gapFunction=&lt;function</span> <span class="pre">Network.relativeGap&gt;</span></em><span class="sig-paren">)</span><a class="headerlink" href="#infrarisk.src.physical.transportation.network.Network.userEquilibrium" title="Permalink to this definition"></a></dt>
<dd><p>This method uses the (link-based) convex combinations algorithm to solve
for user equilibrium.  Arguments are the following:</p>
<blockquote>
<div><dl class="simple">
<dt>stepSizeRule – a string specifying how the step size lambda is</dt><dd><p>to be chosen.  Currently ‘FW’ and ‘MSA’ are the
available choices, but you can implement more if you
want.</p>
</dd>
</dl>
<p>maxIterations – stop after this many iterations have been performed
targetGap     – stop once the gap is below this level
gapFunction   – pointer to the function used to calculate gap.  After</p>
<blockquote>
<div><p>finishing this assignment, you should be able to
choose either relativeGap or averageExcessCost.</p>
</div></blockquote>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="infrarisk.src.physical.transportation.network.Network.validate">
<span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#infrarisk.src.physical.transportation.network.Network.validate" title="Permalink to this definition"></a></dt>
<dd><p>Perform some basic validation checking of network, link, and node
data to ensure reasonableness and consistency.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-infrarisk.src.physical.transportation.transpo_compons">
<span id="infrarisk-src-physical-transportation-transpo-compons-module"></span><h2><span class="section-number">2.1.2.2. </span>infrarisk.src.physical.transportation.transpo_compons module<a class="headerlink" href="#module-infrarisk.src.physical.transportation.transpo_compons" title="Permalink to this headline"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="infrarisk.src.physical.transportation.transpo_compons.Link">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">infrarisk.src.physical.transportation.transpo_compons.</span></span><span class="sig-name descname"><span class="pre">Link</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">network</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tail</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">head</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">capacity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">99999</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">99999</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freeFlowTime</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">99999</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fft_base</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">99999</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">speedLimit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">99999</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">toll</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">linkType</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#infrarisk.src.physical.transportation.transpo_compons.Link" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class for network links.  As currently written, assumes costs are calculated as the
sum of three factors:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Travel time, computed via the BPR function</p></li>
<li><p>Toll cost, the product of toll and network.tollFactor</p></li>
<li><p>Distance-related costs, the product of length and network.distanceFactor</p></li>
</ol>
</div></blockquote>
<dl class="py method">
<dt class="sig sig-object py" id="infrarisk.src.physical.transportation.transpo_compons.Link.calculateBeckmannComponent">
<span class="sig-name descname"><span class="pre">calculateBeckmannComponent</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#infrarisk.src.physical.transportation.transpo_compons.Link.calculateBeckmannComponent" title="Permalink to this definition"></a></dt>
<dd><p>Calculates the integral of the BPR function for the link, for its
contribution to the sum in the Beckmann function.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="infrarisk.src.physical.transportation.transpo_compons.Link.calculateCost">
<span class="sig-name descname"><span class="pre">calculateCost</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#infrarisk.src.physical.transportation.transpo_compons.Link.calculateCost" title="Permalink to this definition"></a></dt>
<dd><p>Calculates the cost of the link using the BPR relation, adding in toll and
distance-related costs.
This cost is returned by the method and NOT stored in the cost attribute.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="infrarisk.src.physical.transportation.transpo_compons.Link.updateCost">
<span class="sig-name descname"><span class="pre">updateCost</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#infrarisk.src.physical.transportation.transpo_compons.Link.updateCost" title="Permalink to this definition"></a></dt>
<dd><p>Same as calculateCost, except that the link.cost attribute is updated as well.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="infrarisk.src.physical.transportation.transpo_compons.Node">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">infrarisk.src.physical.transportation.transpo_compons.</span></span><span class="sig-name descname"><span class="pre">Node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">isZone</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#infrarisk.src.physical.transportation.transpo_compons.Node" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="infrarisk.src.physical.transportation.transpo_compons.OD">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">infrarisk.src.physical.transportation.transpo_compons.</span></span><span class="sig-name descname"><span class="pre">OD</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">origin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">demand</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#infrarisk.src.physical.transportation.transpo_compons.OD" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="infrarisk.src.physical.transportation.transpo_compons.Path">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">infrarisk.src.physical.transportation.transpo_compons.</span></span><span class="sig-name descname"><span class="pre">Path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">links</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">network</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flow</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#infrarisk.src.physical.transportation.transpo_compons.Path" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A Path is an ordered sequence of adjacent links; these are expressed in the
attribute ‘links’, which is a tuple of link IDs.  Other attributes are as
follows:</p>
<blockquote>
<div><p>network points to the parent Network class (needed for calculating costs)
flow is the number of vehicles using this path
cost is the total cost of the path</p>
</div></blockquote>
<dl class="py method">
<dt class="sig sig-object py" id="infrarisk.src.physical.transportation.transpo_compons.Path.calculateCost">
<span class="sig-name descname"><span class="pre">calculateCost</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#infrarisk.src.physical.transportation.transpo_compons.Path.calculateCost" title="Permalink to this definition"></a></dt>
<dd><p>Calculates the cost of the path by summing the cost of its constituent links.
This cost is returned by the method and NOT stored in the cost attribute.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="infrarisk.src.physical.transportation.transpo_compons.Path.updateCost">
<span class="sig-name descname"><span class="pre">updateCost</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#infrarisk.src.physical.transportation.transpo_compons.Path.updateCost" title="Permalink to this definition"></a></dt>
<dd><p>Same as calculateCost, except that the path.cost attribute is updated as well.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="infrarisk.src.physical.transportation.transpo_compons.get_transpo_dict">
<span class="sig-prename descclassname"><span class="pre">infrarisk.src.physical.transportation.transpo_compons.</span></span><span class="sig-name descname"><span class="pre">get_transpo_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#infrarisk.src.physical.transportation.transpo_compons.get_transpo_dict" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="module-infrarisk.src.physical.transportation.utils">
<span id="infrarisk-src-physical-transportation-utils-module"></span><h2><span class="section-number">2.1.2.3. </span>infrarisk.src.physical.transportation.utils module<a class="headerlink" href="#module-infrarisk.src.physical.transportation.utils" title="Permalink to this headline"></a></h2>
<dl class="py exception">
<dt class="sig sig-object py" id="infrarisk.src.physical.transportation.utils.BadFileFormatException">
<em class="property"><span class="pre">exception</span> </em><span class="sig-prename descclassname"><span class="pre">infrarisk.src.physical.transportation.utils.</span></span><span class="sig-name descname"><span class="pre">BadFileFormatException</span></span><a class="headerlink" href="#infrarisk.src.physical.transportation.utils.BadFileFormatException" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>This exception is raised if a network or demand file is in the wrong format or
expresses an invalid network.</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="infrarisk.src.physical.transportation.utils.NotYetAttemptedException">
<em class="property"><span class="pre">exception</span> </em><span class="sig-prename descclassname"><span class="pre">infrarisk.src.physical.transportation.utils.</span></span><span class="sig-name descname"><span class="pre">NotYetAttemptedException</span></span><a class="headerlink" href="#infrarisk.src.physical.transportation.utils.NotYetAttemptedException" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>This exception is used as a placeholder for code you should fill in.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="infrarisk.src.physical.transportation.utils.path2linkTuple">
<span class="sig-prename descclassname"><span class="pre">infrarisk.src.physical.transportation.utils.</span></span><span class="sig-name descname"><span class="pre">path2linkTuple</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pathString</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#infrarisk.src.physical.transportation.utils.path2linkTuple" title="Permalink to this definition"></a></dt>
<dd><p>Converts a path expressed as a sequence of nodes, e.g. [1,2,3,4] into a tuple
of link IDs for use with the Path object (see path.py), in this case
((1,2),(2,3),(3,4))</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="infrarisk.src.physical.transportation.utils.readMetadata">
<span class="sig-prename descclassname"><span class="pre">infrarisk.src.physical.transportation.utils.</span></span><span class="sig-name descname"><span class="pre">readMetadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lines</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#infrarisk.src.physical.transportation.utils.readMetadata" title="Permalink to this definition"></a></dt>
<dd><p>Read metadata tags and values from a TNTP file, returning a dictionary whose
keys are the tags (strings between the &lt;&gt; characters) and corresponding values.
The last metadata line (reading &lt;END OF METADATA&gt;) is stored with a value giving
the line number this tag was found in.  You can use this to proceed with reading
the rest of the file after the metadata.</p>
</dd></dl>

</section>
<section id="module-infrarisk.src.physical.transportation">
<span id="module-contents"></span><h2><span class="section-number">2.1.2.4. </span>Module contents<a class="headerlink" href="#module-infrarisk.src.physical.transportation" title="Permalink to this headline"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="infrarisk.src.physical.power.html" class="btn btn-neutral float-left" title="2.1.1. infrarisk.src.physical.power package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="infrarisk.src.physical.water.html" class="btn btn-neutral float-right" title="2.1.3. infrarisk.src.physical.water package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Srijith Balakrishnan.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>